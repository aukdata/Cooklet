# Pages/Recipes ディレクトリ

## 概要
レシピ管理機能のページコンポーネントを管理するディレクトリ。

## ファイル構成

### Recipes.tsx
レシピ一覧表示とメイン操作を行うページコンポーネント。

#### 状態管理
- `showAddModal`: レシピ追加モーダルの表示状態

#### 機能

**レシピ一覧表示**
- `useRecipes`フックによるレシピデータ取得
- recipe_ingredientsとingredientsテーブルとのJOIN結果表示
- 作成日降順での並び替え

**レシピ詳細表示**
- レシピ名、調理時間バッジ、人前バッジ
- メモ（任意）
- 必要な食材一覧（名前・数量形式、AI抽出対応）
- 推定コスト
- 外部レシピURLリンク

**アクション機能**
- レシピ追加ボタン
- 「作った」ボタン（調理完了機能）
- メニューボタン（編集・削除予定）

**UI要素**
- ローディング・エラー状態表示
- 空データ時のメッセージ
- カード型レイアウト

### AddRecipeModal.tsx
レシピ追加用のモーダルコンポーネント。

#### Props
- `onClose`: モーダル閉じるコールバック
- `onSuccess`: 追加成功時のコールバック

#### 状態管理
- `loading`: 処理中状態
- `formData`: レシピ基本情報（名前、URL、調理時間、人数等）
- `recipeIngredients`: レシピ食材リスト
- `showIngredientForm`: 食材追加フォーム表示状態
- `ingredientForm`: 食材追加フォームデータ

#### 機能

**レシピ基本情報入力**
- レシピ名（必須）
- 調理時間（分、任意）
- 人前（必須、デフォルト1）
- 外部レシピURL（任意）
- 推定コスト（円、任意）
- メモ（任意）

**食材管理**
- 既存食材からの選択（プルダウン）
- 数量・単位の入力
- 任意フラグの設定
- 食材リストへの追加・削除
- デフォルト単位の自動設定

**バリデーション**
- 必須項目チェック
- 数値形式チェック
- URL形式チェック

**データ投稿フロー**
1. レシピ基本情報の作成（`addRecipe`）
2. 食材リストの一括追加（`addRecipeIngredients`）
3. 成功時のコールバック実行

#### UI設計
- 大型モーダル（max-w-2xl）
- グリッドレイアウト（調理時間・人前の横並び）
- 動的食材追加フォーム
- インラインボタンによる操作

#### ヘルパー関数
- `handleAddIngredient()`: 食材リスト追加処理
- `removeIngredient()`: 食材リスト削除処理

## データフロー
1. 既存食材リスト取得（useIngredients）
2. レシピ基本情報の入力・バリデーション
3. 食材リストの動的追加・削除
4. レシピ作成→食材リスト作成の順次実行
5. 一覧データ更新・モーダル閉じる

## 新機能（issue #5対応）

### レシピ詳細ダイアログ機能
- **レシピ名クリック**: レシピタイトルクリックで詳細ダイアログ表示
- **RecipeDetailDialog**: レシピ基本情報の表示・編集・削除への遷移
- **状態管理追加**: `isDetailDialogOpen`, `selectedRecipe`状態の追加
- **ナビゲーション**: 詳細→編集→削除の流れを実装

### ダイアログ連携フロー
1. レシピ一覧でレシピ名をクリック
2. RecipeDetailDialogで詳細表示
3. 詳細ダイアログから編集ボタンでRecipeDialog表示
4. 詳細ダイアログから削除ボタンでConfirmDialog表示

## 注意点
- 「作った」ボタンの機能が未実装（meal_plansテーブルとの連携予定）
- ~~レシピ編集・削除機能が未実装~~ → issue #5で実装完了
- 外部URL食材自動抽出機能が未実装（LLM連携予定）
- タグ機能が未実装（仕様書では想定）
- 検索・フィルター機能が未実装