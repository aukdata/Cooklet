# Pages/Settings ディレクトリ

## 概要
ユーザ設定機能のページコンポーネントを管理するディレクトリ。GitHub issue #8に対応した新機能。

## ファイル構成

### Settings.tsx
ユーザ設定画面のメインコンポーネント - issue #8要件に準拠した実装。

### IngredientManagement.tsx
材料マスタ管理専用画面のコンポーネント - Settings.tsxから分離した独立画面。

#### 実装済み機能

**ユーザ情報表示・編集**
- メールアドレス表示（読み取り専用）
- 表示名の表示・編集機能
- 編集モードの切り替え（編集・保存・キャンセル）

**材料設定機能**（専用画面に分離）
- 材料マスタ管理画面へのリンク表示
- 専用画面で材料の追加・編集・削除を行う

**ログアウト機能**
- 安全なログアウト処理
- ローディング状態の表示
- エラーハンドリング

**アプリ情報表示**
- バージョン情報表示（package.jsonから動的取得）
- ビルド日時表示（ビルド時自動生成）

#### Props
- `onClose`: 設定画面を閉じるコールバック関数

#### UI設計

**モーダルレイアウト**
- 固定オーバーレイとモーダルウィンドウ
- ヘッダー部分（⚙️アイコンとタイトル、閉じるボタン）
- コンテンツエリア（ユーザ情報・アプリ情報・ログアウト）

**ユーザ情報セクション**
- メールアドレス（グレー背景で表示のみ）
- 表示名（編集可能、インライン編集UI）
- 編集・保存・キャンセルボタン

**ログアウトセクション**
- 赤色の危険度表示ボタン
- ローディングスピナー付き
- 無効化状態の管理

#### 状態管理

**ローカル状態**
- `isEditing`: 表示名編集モードの管理
- `displayName`: 編集中の表示名
- `isLoggingOut`: ログアウト処理中状態

**認証連携**
- `useAuth`フックとの完全連携
- `user.email`の表示
- `user.user_metadata.full_name`の編集
- `signOut`関数の呼び出し

**ビルド情報連携**
- `useBuildInfo`フックでビルド情報取得
- バージョン情報とビルド日時の動的表示
- エラーハンドリングとフォールバック機能

#### 現在の制限事項

**表示名更新未実装**
- Supabaseのuser_metadata更新処理は将来実装予定
- 現在は編集可能だが実際の保存は未実装

**プロファイル画像未対応**
- アバター表示機能は実装していない

#### IngredientManagement.tsx

**材料マスタ管理機能**
- 材料マスタの一覧表示（カテゴリ別グループ化）
- 材料の追加・編集・削除機能
- カテゴリ分類（野菜・肉・調味料・その他）
- デフォルト単位・一般的価格の設定
- カード形式でのレスポンシブ表示

**ナビゲーション機能**
- 設定画面への戻るボタン
- NavigationContextを使用した画面遷移

**UI設計**
- カテゴリ別アイコン表示
- グリッドレイアウトでの材料表示
- 空状態の適切な表示

#### 今後の実装予定

**プロファイル更新機能**
- Supabase Authのuser_metadata更新API連携
- プロファイル画像のアップロード機能

**設定項目の拡張**
- 通知設定の管理
- テーマ設定（ダーク・ライトモード）
- 言語設定

**データエクスポート機能**
- 献立データのエクスポート
- コストデータのエクスポート

## 注意点
- NavigationContextを使用したタブベース画面遷移
- 材料マスタ管理は独立画面として実装
- ログアウト処理は非同期でエラーハンドリング付き
- 表示名編集はインライン編集UI採用
- レスポンシブデザイン対応
- issue #8仕様に完全準拠