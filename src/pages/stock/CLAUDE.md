# Pages/Stock ディレクトリ

## 概要
在庫管理機能のページコンポーネントを管理するディレクトリ。GitHub issue #3に対応した新機能。

## ファイル構成

### Stock.tsx
在庫管理画面のメインコンポーネント - issue #3要件に準拠した実装。

#### 実装済み機能

**在庫一覧表示**
- 品名、数量、保存場所の表形式表示
- 賞味期限による色分け表示（期限切れ：赤、期限間近：黄）
- カテゴリ別の色分けバッジ表示
- 作り置きフラグの表示

**在庫詳細情報**
- 食材名とカテゴリバッジ
- 数量・単位表示
- 保存場所（冷蔵庫・冷凍庫・常温）
- 賞味期限と期限状態
- 購入価格（任意）
- 作り置きフラグ

**在庫追加機能**
- 在庫追加ボタン
- AddInventoryModalとの連携
- 在庫データの自動更新

**期限管理**
- `isExpiringSoon()`: 3日以内の期限間近判定
- `isExpired()`: 期限切れ判定
- 視覚的な状態表示（背景色とラベル）

#### データ連携

**useInventoryフック使用**
- `inventory`: 在庫アイテム配列
- `loading`: 読み込み状態
- `error`: エラーメッセージ
- `addInventoryItem`: 在庫追加関数
- `updateInventoryItem`: 在庫更新関数（未実装）
- `deleteInventoryItem`: 在庫削除関数（未実装）
- `refetch`: 在庫再取得関数

#### UI設計

**ヘッダー部分**
- 📦アイコンと「在庫管理」タイトル
- 在庫件数表示
- 在庫追加ボタン

**一覧表示**
- カード型レイアウト
- 期限状態による背景色変更
- 食材カテゴリによる色分けバッジ
- レスポンシブデザイン対応

**状態表示**
- ローディング状態
- エラー状態
- 空データ状態

#### 実装完了機能

**編集・削除機能**
- 編集ボタンクリックでStockDialog表示
- 削除ボタンクリックで確認ダイアログ表示
- updateStockItem, deleteStockItem関数との連携
- StockDialogとConfirmDialogの完全統合

**データ型の違い**
- useInventoryフックは既存のinventoryテーブル構造を使用
- CLAUDE.md仕様書のstock_itemsテーブルとは異なる

#### 実装済み機能（更新）

**ダイアログ統合**
- StockDialogによる在庫編集・追加
- ConfirmDialogによる削除確認
- useStockItemsフックとの完全連携
- 新規追加・編集モードの切り替え
- エラーハンドリング付きの操作

#### 今後の実装予定

**フィルター・検索機能**
- 期限状態別フィルター
- 保存場所別フィルター
- 食材名検索

**自動追加機能**
- 買い物リストからの自動追加
- 献立作成時の在庫自動減算

## 注意点
- 📦アイコンを使用（boxアイコン）
- 在庫は英語で「Stock」として管理
- GitHub issue #3の仕様変更に対応
- 既存のInventory.tsxとは別の新しい在庫画面
- ~~AddInventoryModalを再利用してコード重複を避ける~~ → StockDialogに統一
- 編集・削除機能の完全実装により実用性が向上