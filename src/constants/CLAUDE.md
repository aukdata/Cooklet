# src/constants - 共通定数

アプリ全体で使用する定数を定義するディレクトリです。

## ファイル構成

### units.ts
**用途**: 食材の単位定義と数量処理ユーティリティ

## 定数定義

### FOOD_UNITS
**型**: `readonly string[]`
**用途**: アプリ全体で使用可能な食材単位一覧（計23種類）

**カテゴリ別分類**:
- **重量系**: g, kg
- **容量系**: mL, L, cc, 合  
- **個数系**: 個, 本, 枚, 袋, 缶, パック, 箱, 束, 片, 房
- **料理系**: 人前, カップ, 大さじ, 小さじ, 杯
- **その他**: - (単位なし)

### FoodUnit
**型**: `typeof FOOD_UNITS[number]`
**用途**: FOOD_UNITSの要素型（リテラル型による型安全性確保）

## ユーティリティ関数

### parseQuantity(quantity: string)
**用途**: 文字列から数値と単位を分離する関数

**引数**:
- `quantity: string` - パース対象の文字列（例："200g", "2個", "適量"）

**戻り値**:
- `{ amount: string; unit: FoodUnit }` - 分離された数値と単位

**処理ロジック**:
1. 長い単位名を優先してマッチング（例："大さじ"が"大"より優先）
2. 文字列の末尾から単位を特定
3. 単位が見つからない場合は全体をamountとして扱う
4. 数値・分数・"適量"系文字列は単位なし("-")として処理

**特殊処理**:
- 分数対応: "1/2", "0.5"等
- 定型表現対応: "適量", "お好み", "少々", "ひとつまみ", "ひとかけ"

### formatQuantity(amount: string, unit: FoodUnit)
**用途**: 数値と単位を結合して文字列を生成

**引数**:
- `amount: string` - 数値部分
- `unit: FoodUnit` - 単位部分

**戻り値**:
- `string` - 結合された文字列（例："200g", "2個"）

**処理ロジック**:
- 両方が空の場合は空文字を返す
- 一方が空の場合はもう一方のみを返す
- 通常は "${amount}${unit}" の形式で結合

## 使用場面

### FOOD_UNITS / FoodUnit
- 在庫ダイアログの単位選択
- レシピ材料の単位指定
- 買い物リストの単位表示
- IngredientDialogの単位コンボボックス

### parseQuantity
- QuantityInputコンポーネントでの値分離
- レシート読み取り結果の正規化
- ユーザー入力の解析処理

### formatQuantity
- QuantityInputコンポーネントでの値結合
- データベース保存前の値整形
- 表示用文字列の生成

## 設計方針

- **拡張性**: 新しい単位の追加が容易
- **型安全性**: TypeScriptの厳密な型チェック活用
- **国際化**: 日本の一般的な食材単位に特化
- **柔軟性**: 自由入力にも対応（適量、お好み等）
- **一意性**: 長い単位名の優先マッチングで曖昧性回避

## 注意事項

- 単位の追加・変更時は既存データとの整合性を考慮する
- parseQuantity関数は完全なパースではなく、実用的な近似処理
- 単位変換機能は含まない（g↔kg等の変換は別途実装が必要）