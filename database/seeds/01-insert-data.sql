-- Phase 4: 基本データ挿入（すべてのテーブル）
-- 03-setup-rls.sqlの実行後に実行してください

-- ========================================
-- 1. ingredients テーブル（食材マスタ）
-- ========================================

-- 基本的な食材データの挿入（重複を避ける）
INSERT INTO ingredients (name, category, default_unit, typical_price) VALUES
-- 野菜
('玉ねぎ', 'vegetables', '個', 100),
('人参', 'vegetables', '本', 80),
('じゃがいも', 'vegetables', '個', 60),
('キャベツ', 'vegetables', '個', 200),
('白菜', 'vegetables', '個', 300),
('大根', 'vegetables', '本', 150),
('トマト', 'vegetables', '個', 120),
('きゅうり', 'vegetables', '本', 80),
('ほうれん草', 'vegetables', '束', 150),
('小松菜', 'vegetables', '束', 120),
('もやし', 'vegetables', '袋', 50),
('ピーマン', 'vegetables', '個', 40),
('なす', 'vegetables', '本', 80),
('ブロッコリー', 'vegetables', '株', 200),

-- 肉類
('豚肉（バラ）', 'meat', 'g', 2.5),
('豚肉（こま切れ）', 'meat', 'g', 2.0),
('鶏肉（もも）', 'meat', 'g', 1.8),
('鶏肉（むね）', 'meat', 'g', 1.2),
('牛肉（切り落とし）', 'meat', 'g', 3.0),
('ひき肉（豚）', 'meat', 'g', 1.8),
('ひき肉（鶏）', 'meat', 'g', 1.5),
('ひき肉（牛）', 'meat', 'g', 2.8),
('ソーセージ', 'meat', '本', 50),
('ベーコン', 'meat', 'g', 3.5),

-- 調味料
('醤油', 'seasoning', 'ml', 0.3),
('味噌', 'seasoning', 'g', 0.8),
('塩', 'seasoning', 'g', 0.1),
('砂糖', 'seasoning', 'g', 0.2),
('酒', 'seasoning', 'ml', 0.5),
('みりん', 'seasoning', 'ml', 0.8),
('酢', 'seasoning', 'ml', 0.6),
('油', 'seasoning', 'ml', 0.4),
('胡椒', 'seasoning', 'g', 2.0),
('にんにく', 'seasoning', '片', 20),
('生姜', 'seasoning', 'g', 3.0),
('めんつゆ', 'seasoning', 'ml', 1.0),

-- その他
('米', 'others', 'g', 0.6),
('卵', 'others', '個', 30),
('牛乳', 'others', 'ml', 0.2),
('パン', 'others', '枚', 40),
('パスタ', 'others', 'g', 1.2),
('うどん', 'others', '玉', 80),
('豆腐', 'others', '丁', 100),
('チーズ', 'others', 'g', 4.0),
('バター', 'others', 'g', 3.0),
('ヨーグルト', 'others', 'g', 1.5)

ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 2. テストユーザーのダミーデータ挿入
-- ========================================
-- 注意: 以下は開発・テスト用のダミーデータです
-- 本番環境では適宜削除してください

-- テスト用ユーザー（実際の認証ユーザーIDに置き換えてください）
-- この部分は実際のSupabase auth.usersにユーザーが作成された後に実行してください
/*
-- テストユーザーの例（実際のauth.user IDに変更してください）
INSERT INTO users (id, email, name) VALUES
('12345678-1234-1234-1234-123456789012', 'test@cooklet.com', 'テストユーザー')
ON CONFLICT (id) DO NOTHING;
*/

-- ========================================
-- 3. stock_items テーブル（在庫情報）
-- ========================================
-- 注意: user_idを実際の認証ユーザーIDに変更してください

/*
-- テスト用在庫データ（user_idを実際のIDに変更してください）
INSERT INTO stock_items (user_id, name, quantity, best_before, storage_location, is_homemade) VALUES
-- 冷蔵庫の在庫
('12345678-1234-1234-1234-123456789012', '玉ねぎ', '3個', '2025-01-20', '冷蔵庫', false),
('12345678-1234-1234-1234-123456789012', '人参', '2本', '2025-01-15', '冷蔵庫', false),
('12345678-1234-1234-1234-123456789012', 'じゃがいも', '5個', '2025-01-25', '冷蔵庫', false),
('12345678-1234-1234-1234-123456789012', '卵', '10個', '2025-01-18', '冷蔵庫', false),
('12345678-1234-1234-1234-123456789012', '牛乳', '1本', '2025-01-16', '冷蔵庫', false),
('12345678-1234-1234-1234-123456789012', '豆腐', '1丁', '2025-01-14', '冷蔵庫', false),

-- 冷凍庫の在庫
('12345678-1234-1234-1234-123456789012', '鶏肉（もも）', '300g', '2025-02-15', '冷凍庫', false),
('12345678-1234-1234-1234-123456789012', 'ひき肉（豚）', '250g', '2025-02-20', '冷凍庫', false),

-- 常温の在庫
('12345678-1234-1234-1234-123456789012', '米', '5kg', '2025-06-30', '常温', false),
('12345678-1234-1234-1234-123456789012', 'パスタ', '500g', '2025-12-31', '常温', false),

-- 作り置き
('12345678-1234-1234-1234-123456789012', 'カレー', '4人分', '2025-01-17', '冷蔵庫', true),
('12345678-1234-1234-1234-123456789012', 'ハンバーグ', '6個', '2025-01-20', '冷凍庫', true)

ON CONFLICT (id) DO NOTHING;
*/

-- ========================================
-- 4. meal_plans テーブル（献立計画）
-- ========================================

/*
-- テスト用献立データ（user_idを実際のIDに変更してください）
INSERT INTO meal_plans (user_id, date, meal_type, recipe_url, ingredients, memo) VALUES
-- 今日の献立
('12345678-1234-1234-1234-123456789012', CURRENT_DATE, '朝', 'https://cookpad.com/recipe/toast', '[{"name":"パン","quantity":"2枚"},{"name":"バター","quantity":"10g"}]', 'バタートースト'),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE, '昼', null, '[{"name":"米","quantity":"150g"},{"name":"卵","quantity":"2個"},{"name":"醤油","quantity":"大さじ1"}]', '卵かけご飯'),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE, '夜', 'https://cookpad.com/recipe/hamburger', '[{"name":"ひき肉（豚）","quantity":"200g"},{"name":"玉ねぎ","quantity":"1個"},{"name":"卵","quantity":"1個"}]', 'ハンバーグ定食'),

-- 明日の献立
('12345678-1234-1234-1234-123456789012', CURRENT_DATE + INTERVAL '1 day', '朝', null, '[{"name":"米","quantity":"150g"},{"name":"味噌","quantity":"大さじ1"}]', '味噌汁とご飯'),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE + INTERVAL '1 day', '夜', 'https://cookpad.com/recipe/pasta', '[{"name":"パスタ","quantity":"100g"},{"name":"トマト","quantity":"2個"}]', 'トマトパスタ'),

-- 明後日の献立
('12345678-1234-1234-1234-123456789012', CURRENT_DATE + INTERVAL '2 days', '朝', null, '[{"name":"パン","quantity":"2枚"},{"name":"卵","quantity":"1個"}]', 'スクランブルエッグトースト'),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE + INTERVAL '2 days', '昼', null, '[{"name":"うどん","quantity":"1玉"},{"name":"卵","quantity":"1個"}]', '月見うどん'),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE + INTERVAL '2 days', '夜', null, '[{"name":"鶏肉（もも）","quantity":"200g"},{"name":"人参","quantity":"1本"},{"name":"じゃがいも","quantity":"2個"}]', '肉じゃが')

ON CONFLICT (id) DO NOTHING;
*/

-- ========================================
-- 5. shopping_list テーブル（買い物リスト）
-- ========================================

/*
-- テスト用買い物リストデータ（user_idを実際のIDに変更してください）
INSERT INTO shopping_list (user_id, name, quantity, checked, added_from) VALUES
-- 自動追加された不足食材
('12345678-1234-1234-1234-123456789012', 'トマト缶', '2缶', false, 'auto'),
('12345678-1234-1234-1234-123456789012', 'にんにく', '1片', false, 'auto'),
('12345678-1234-1234-1234-123456789012', 'オリーブオイル', '1本', false, 'auto'),

-- 手動追加されたアイテム
('12345678-1234-1234-1234-123456789012', 'ティッシュ', '1箱', false, 'manual'),
('12345678-1234-1234-1234-123456789012', '洗剤', '1本', false, 'manual'),
('12345678-1234-1234-1234-123456789012', 'ヨーグルト', '3個パック', false, 'manual'),

-- 完了済みアイテム
('12345678-1234-1234-1234-123456789012', 'パン', '1斤', true, 'manual'),
('12345678-1234-1234-1234-123456789012', '牛乳', '1本', true, 'auto'),
('12345678-1234-1234-1234-123456789012', 'バナナ', '1房', true, 'manual')

ON CONFLICT (id) DO NOTHING;
*/

-- ========================================
-- 6. cost_records テーブル（コスト記録）
-- ========================================

/*
-- テスト用コスト記録データ（user_idを実際のIDに変更してください）
INSERT INTO cost_records (user_id, date, description, amount, is_eating_out) VALUES
-- 今月の支出記録
('12345678-1234-1234-1234-123456789012', CURRENT_DATE, '朝食 - トースト', 120, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '1 day', '夕食 - 居酒屋', 1500, true),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '1 day', '昼食 - 自作弁当', 200, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '2 days', '夕食 - ハンバーグ', 350, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '2 days', '昼食 - パスタ', 180, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '3 days', '朝食 - パン', 100, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '3 days', '昼食 - ラーメン店', 800, true),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '4 days', '夕食 - 肉じゃが', 300, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '5 days', '朝食 - おにぎり', 150, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '5 days', '昼食 - カフェ', 1200, true),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '6 days', '夕食 - カレー', 250, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '7 days', '朝食 - ヨーグルト', 80, false),

-- 先月の支出記録（サンプル）
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '30 days', '夕食 - 寿司', 2000, true),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '31 days', '昼食 - 弁当', 400, false),
('12345678-1234-1234-1234-123456789012', CURRENT_DATE - INTERVAL '32 days', '朝食 - サンドイッチ', 300, false)

ON CONFLICT (id) DO NOTHING;
*/

-- ========================================
-- 7. saved_recipes テーブル（保存レシピ）
-- ========================================

/*
-- テスト用保存レシピデータ（user_idを実際のIDに変更してください）
INSERT INTO saved_recipes (user_id, title, url, servings, tags) VALUES
-- 保存済みレシピ
('12345678-1234-1234-1234-123456789012', 'ハンバーグ定食', 'https://cookpad.com/recipe/hamburger-set', 2, ARRAY['肉料理', 'メイン', '定食']),
('12345678-1234-1234-1234-123456789012', '親子丼', 'https://cookpad.com/recipe/oyakodon', 1, ARRAY['丼物', '和食', '卵料理']),
('12345678-1234-1234-1234-123456789012', 'トマトパスタ', 'https://recipe.rakuten.co.jp/tomato-pasta', 1, ARRAY['パスタ', 'イタリアン', 'トマト']),
('12345678-1234-1234-1234-123456789012', 'チキンカレー', 'https://cookpad.com/recipe/chicken-curry', 4, ARRAY['カレー', '肉料理', 'スパイス']),
('12345678-1234-1234-1234-123456789012', '野菜炒め', 'https://cookpad.com/recipe/yasai-itame', 2, ARRAY['野菜料理', '中華', '簡単']),
('12345678-1234-1234-1234-123456789012', '味噌汁', 'https://cookpad.com/recipe/miso-soup', 4, ARRAY['汁物', '和食', '簡単']),
('12345678-1234-1234-1234-123456789012', 'オムライス', 'https://recipe.rakuten.co.jp/omrice', 1, ARRAY['洋食', '卵料理', 'ライス']),
('12345678-1234-1234-1234-123456789012', '唐揚げ', 'https://cookpad.com/recipe/karaage', 3, ARRAY['肉料理', '揚げ物', 'お弁当']),
('12345678-1234-1234-1234-123456789012', 'サラダ', 'https://cookpad.com/recipe/fresh-salad', 2, ARRAY['野菜料理', 'サラダ', 'ヘルシー']),
('12345678-1234-1234-1234-123456789012', 'チャーハン', 'https://cookpad.com/recipe/fried-rice', 1, ARRAY['中華', 'ライス', '簡単']),
('12345678-1234-1234-1234-123456789012', 'グラタン', 'https://recipe.rakuten.co.jp/gratin', 4, ARRAY['洋食', 'オーブン', 'チーズ']),
('12345678-1234-1234-1234-123456789012', '焼き魚定食', 'https://cookpad.com/recipe/grilled-fish', 1, ARRAY['魚料理', '和食', '定食'])

ON CONFLICT (id) DO NOTHING;
*/

-- ========================================
-- データ挿入完了メッセージ
-- ========================================

SELECT '基本データ挿入が完了しました。

注意: ユーザー固有のダミーデータ（stock_items, meal_plans, shopping_list, cost_records, saved_recipes）は
コメントアウトされています。

実際のSupabase認証ユーザーが作成された後、以下の手順を実行してください：
1. 認証ユーザーでログインしてユーザーIDを取得
2. コメントアウト部分のuser_idを実際のIDに変更
3. 該当部分のコメントを外して再実行

次に05-create-triggers.sqlを実行してください。' AS message;